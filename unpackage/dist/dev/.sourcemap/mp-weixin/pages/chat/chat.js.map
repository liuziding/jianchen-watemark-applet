{"version":3,"sources":["uni-app:///main.js","webpack:////Users/fengye/Desktop/其他/代码/jianchen-watemark-applet/pages/chat/chat.vue?5dfb","webpack:////Users/fengye/Desktop/其他/代码/jianchen-watemark-applet/pages/chat/chat.vue?9436","webpack:////Users/fengye/Desktop/其他/代码/jianchen-watemark-applet/pages/chat/chat.vue?7e37","webpack:////Users/fengye/Desktop/其他/代码/jianchen-watemark-applet/pages/chat/chat.vue?6abc","uni-app:///pages/chat/chat.vue","webpack:////Users/fengye/Desktop/其他/代码/jianchen-watemark-applet/pages/chat/chat.vue?460c","webpack:////Users/fengye/Desktop/其他/代码/jianchen-watemark-applet/pages/chat/chat.vue?06a8"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","facilities","picPath","height","width","left","top","shrinkRatio","imgSize","touch","startx","starty","oLeft","oTop","isMove","start","points","components","computed","onLoad","_this","dom","onReady","uni","onUnload","onShow","onReachBottom","methods","onImageLoad","touchstart","touchmove","p2","p1","x","y","scale","touchend"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAi1B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsBr2B;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAL;QACAC;MACA;MACAK;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;IACA;EACA;EACAC;EACAC;EACAC;IACA;IACAC;MACAC;QACAD;MACA;IACA;EACA;EACAE;IACA;IACAC;MACAH;MACAA;IACA;EACA;EACAI;IACAD;EACA;EACAE;EACAC;EACAC;IACAC;MACA;MACAP;QACAD;;QAEA;QACAA;QACA;QACAA;QACA;QACAA;UACAjB;UACAC;QACA;MACA;IACA;IACAyB;MACA;MACA;MACA;MAEA;QACA;MACA;;MAEA;MACA;MACA;MAEAR;QACAD;QACAA;MACA;MAEA;QACAA;MACA;QACAA;QACAA;MACA;MAEAA;IACA;IACAU;MACA;MACA;QACA;QAEA;UACA;QACA;QAEA;QACA;QAEAV;QACAA;MACA;QACA;QACA;QACA;QACA;QACA;QAEA;UACA;QACA;QAEA;QACA;QACA;QAEAW;QACAC;QAEA;UACA;QACA;QAEAC;QACAC;QAEA;QACA;QAEAC;QACAA;QAEA;QACA;QAEA;UACA;QACA;QAEA;UACA;QACA;QAEAf;QACAA;MACA;IACA;IACAgB;MACA;MACA;MAEA;QACAhB;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACvLA;AAAA;AAAA;AAAA;AAAolD,CAAgB,y7CAAG,EAAC,C;;;;;;;;;;;ACAxmD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chat/chat.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chat/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=bf16e7f4&scoped=true&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf16e7f4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=bf16e7f4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = parseFloat(_vm.imgSize.width)\n  var m1 = parseFloat(_vm.imgSize.width)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"pic-map\" @touchmove.stop.prevent=\"\" ref=\"picMap\" @touchstart=\"touchstart\" @touchmove=\"touchmove\"\n        @touchend=\"touchend\">\n        <div class=\"map-img\" ref=\"mapImg\" :style=\"{\n            width:width,\n            height:height,\n            left:left,\n            top:top\n        }\">\n            <image class=\"map-pic\" :style=\"{\n            width:width,\n            height:height,\n        }\" :src=\"picPath\" mode=\"aspectFit\" @load=\"onImageLoad\"></image>\n            <image class=\"map-marker\" :style=\"{\n                'left':item.longitude *  (width / parseFloat(imgSize.width) ),\n                'top':(imgSize.height - item.latitude) *  (width / parseFloat(imgSize.width) )\n            }\" src=\"/static/default.png\" v-for=\"(item,index) in facilities\" :key=\"index\"></image>\n        </div>\n    </div>\n</template>\n \n<script>\n    const dom = weex.requireModule('dom')\n    export default {\n        data() {\n            return {\n                facilities: [],\n                picPath: '',\n                height: 0,\n                width: 0,\n                left: 0,\n                top: 0,\n                shrinkRatio: 1,\n                imgSize: {\n                    height: 0,\n                    width: 0\n                },\n                touch: {\n                    startx: 0,\n                    starty: 0,\n                    oLeft: 0,\n                    oTop: 0,\n                    isMove: true,\n                    start: []\n                },\n                points: []\n            };\n        },\n        components: {},\n        computed: {},\n        onLoad() {\n            let _this = this;\n            _this.$nextTick(function() {\n                dom.getComponentRect(_this.$refs.picMap, option => {\n                    _this.width = option.size.width;\n                })\n            })\n        },\n        onReady() {\n            let _this = this;\n            uni.$on('getPicPoints', data => {\n                _this.facilities = data.facilities;\n                _this.picPath = data.picPath\n            })\n        },\n        onUnload() {\n            uni.$off('selectFactory')\n        },\n        onShow() {},\n        onReachBottom() {},\n        methods: {\n            onImageLoad(e) {\n                let _this = this;\n                dom.getComponentRect(_this.$refs.picMap, option => {\n                    _this.width = option.size.width;\n \n                    // 显示宽度 对比实际图片宽缩小倍数\n                    _this.shrinkRatio = _this.width / parseFloat(e.detail.width)\n                    // 实际高度 * 缩小倍率 = 展示高度\n                    _this.height = e.detail.height * _this.shrinkRatio\n                    // 记录图片实际宽高\n                    _this.imgSize = {\n                        height: e.detail.height,\n                        width: e.detail.width\n                    }\n                })\n            },\n            touchstart(e) {\n                let _this = this;\n                //判断手指数\n                let ttg = e.changedTouches[0];\n \n                if (!ttg || !ttg.pageX) {\n                    return;\n                }\n \n                //计算相对的位置\n                this.touch.startx = ttg.pageX\n                this.touch.starty = ttg.pageY\n \n                dom.getComponentRect(_this.$refs.mapImg, option => {\n                    _this.touch.oLeft = option.size.left;\n                    _this.touch.oTop = option.size.top;\n                })\n \n                if (ttg.identifier >= 1) {\n                    _this.touch.isMove = false\n                } else {\n                    _this.touch.isMove = true\n                    _this.touch.start = [];\n                }\n \n                _this.touch.start.push(ttg);\n            },\n            touchmove(e) {\n                let _this = this;\n                if (_this.touch.isMove) {\n                    let ttg = e.changedTouches[0];\n \n                    if (!ttg || !ttg.pageX) {\n                        return;\n                    }\n \n                    let x = ttg.pageX - _this.touch.startx;\n                    let y = ttg.pageY - _this.touch.starty;\n \n                    _this.left = x + _this.touch.oLeft;\n                    _this.top = y + _this.touch.oTop;\n                } else if (!_this.touch.isMove && _this.touch.start.length >= 2) {\n                    //得到第二组两个点\n                    let now = e.changedTouches;\n                    //得到缩放比例， getDistance 是勾股定理的一个方法\n                    let p2 = now[1];\n                    let p1 = now[0];\n \n                    if (!p2 || !p1 || !p2.pageX || !p1.pageX) {\n                        return;\n                    }\n \n                    let x = (p2.pageX - p1.pageX)\n                    let y = (p2.pageY - p1.pageY)\n                    let value01 = Math.sqrt((x * x) + (y * y))\n \n                    p2 = _this.touch.start[1]\n                    p1 = _this.touch.start[0]\n \n                    if (!p2 || !p1 || !p2.pageX || !p1.pageX) {\n                        return;\n                    }\n \n                    x = (p2.pageX - p1.pageX)\n                    y = (p2.pageY - p1.pageY)\n                     \n                    let value02 = Math.sqrt((x * x) + (y * y))\n                    let scale = (value01 / value02);\n                     \n                    scale = scale.toFixed(2);\n                    scale = (scale - 1) / 30 + 1;\n \n                    let h = _this.height;\n                    let w = _this.width;\n \n                    if (h * scale > _this.imgSize.height) {\n                        return false;\n                    }\n \n                    if (h * scale < 100 && w * scale < 100) {\n                        return false;\n                    }\n \n                    _this.height = h * scale\n                    _this.width = w * scale\n                }\n            },\n            touchend(e) {\n                let _this = this;\n                let ttg = e.changedTouches[0];\n \n                if (ttg.identifier >= 1) {\n                    _this.touch.start = [];\n                }\n            }\n        }\n    };\n</script>\n \n<style lang=\"scss\" scoped>\n    .pic-map {\n        background-color: rgba(155, 155, 155, 0.9);\n \n    }\n \n    .map-img {\n        position: fixed;\n \n        .map-pic {}\n \n        .map-marker {\n            position: absolute;\n            width: 37.5px;\n            height: 50px;\n            margin-top: -50px;\n            margin-left: -18.25px;\n        }\n    }\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681871918356\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}